<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
    style-src 'self' 'unsafe-inline';
    font-src 'self';
    img-src 'self' data:;
    frame-src 'self';
    connect-src 'self';
  " />
  <title>KAIROS ‚Äî Penser avec friction</title>
  <meta name="description" content="KAIROS ‚Äî Application Electron de cartographie cognitive avec jauge Oxyg√®ne, d√©tection de circularit√© et injection de friction.">
  <meta property="og:type" content="website">
  <meta property="og:title" content="KAIROS ‚Äî Penser avec friction">
  <meta property="og:description" content="Application de cartographie cognitive qui mesure la vitalit√© de votre pens√©e en temps r√©el.">
  <meta property="og:url" content="https://kairos-commu.github.io/site-de-recherche/presentation_kairos.html">
  <meta property="og:site_name" content="Florent Klimacek">
  <meta property="og:locale" content="fr_FR">
  <meta property="og:image" content="https://kairos-commu.github.io/site-de-recherche/og-image.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="KAIROS ‚Äî Penser avec friction">
  <meta name="twitter:description" content="Application de cartographie cognitive qui mesure la vitalit√© de votre pens√©e en temps r√©el.">
  <meta name="twitter:image" content="https://kairos-commu.github.io/site-de-recherche/og-image.jpg">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="alternate" type="application/rss+xml" title="Florent Klimacek ‚Äî Articles" href="feed.xml">
  <link rel="stylesheet" href="css/kairos.css">
</head>
<body>
  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="index.html" style="color: var(--accent-purple);">‚Üê Site</a></li>
      <li><a href="#hero">Accueil</a></li>
      <li><a href="#genese">Gen√®se</a></li>
      <li><a href="#probleme">Le Probl√®me</a></li>
      <li><a href="#solution">Les Modes</a></li>
      <li><a href="#demo">D√©mo</a></li>
      <li><a href="#essayer">Essayer</a></li>
      <li><a href="#usecases">Usages</a></li>
      <li><a href="#vision">Vision</a></li>
      <li><a href="#documentation">Docs</a></li>
    </ul>
  </nav>

  <!-- Hero -->
  <section id="hero">
    <div class="container" style="text-align: center;">
      <h1 class="fade-in">KAIROS</h1>
      <p class="subtitle fade-in delay-1">Penser avec friction</p>

      <div class="hero-equation fade-in delay-2" style="display: inline-flex; align-items: center; gap: 1.5rem;">
        <span style="font-size: 2.5rem;">O<sub style="font-size: 1.5rem;">2</sub></span>
        <span style="font-size: 1.5rem; color: var(--text-muted);">=</span>
        <span style="display: flex; gap: 1rem; align-items: center;">
          <span style="color: var(--accent-green);">100</span>
          <span style="color: var(--text-muted); font-size: 1.2rem;">‚Üí</span>
          <span style="color: var(--accent-orange);">50</span>
          <span style="color: var(--text-muted); font-size: 1.2rem;">‚Üí</span>
          <span style="color: var(--accent-red);">0</span>
        </span>
      </div>

      <div class="hero-legend fade-in delay-3">
        <span style="color: var(--accent-green);"><strong>>50</strong> Respire</span>
        <span style="color: var(--accent-orange);"><strong>30-50</strong> Stagne</span>
        <span style="color: var(--accent-red);"><strong><30</strong> Asphyxie</span>
      </div>

      <p style="margin: 2rem auto; max-width: 650px;" class="fade-in delay-3">
        Une application de cartographie cognitive qui mesure la <strong>vitalit√©</strong> de votre pens√©e
        en temps r√©el. Quand le canvas s'asphyxie, KAIROS injecte de la friction
        pour relancer l'exploration.
      </p>
    </div>
    <div class="scroll-indicator"></div>
  </section>

  <!-- Gen√®se -->
  <section id="genese">
    <div class="container">
      <h2>La Gen√®se</h2>
      <p>
        KAIROS est n√© d'une observation personnelle : une compatibilit√© cognitive
        avec les LLM rarement trouv√©e dans les √©changes humains.
      </p>

      <div class="timeline">
        <div class="timeline-item">
          <h4>Observation initiale</h4>
          <p>
            Une sensation de <span class="highlight-text">"pens√©e en faisceau"</span> ‚Äî
            ce traitement non-lin√©aire et parall√®le de l'information ‚Äî
            qui trouve un √©cho dans l'architecture m√™me des LLM.
          </p>
        </div>

        <div class="timeline-item">
          <h4>Exploration th√©orique</h4>
          <p>
            Documentation syst√©matique des <span class="highlight-text">"m√©caniques invisibles"</span>
            des conversations IA : effets miroir, asym√©tries informationnelles,
            illusions de permission.
          </p>
        </div>

        <div class="timeline-item">
          <h4>Cadre de mesure</h4>
          <p>
            L'id√©e de mesurer la qualit√© conversationnelle donne naissance √†
            l'<span class="highlight-text">√©quation de r√©sonance</span> :
            R = (I/E) √ó f(O) √ó (A-L)
          </p>
        </div>

        <div class="timeline-item">
          <h4>Sessions de friction</h4>
          <p>
            Apr√®s des sessions de friction cognitive intense,
            <span class="highlight-text">recentrage de l'objectif</span> :
            non plus prouver une "r√©sonance" objective,
            mais cr√©er un outil pratique pour pr√©server les insights.
          </p>
        </div>

        <div class="timeline-item">
          <h4>Outil concret</h4>
          <p>
            KAIROS na√Æt : un amplificateur de pens√©e qui d√©tecte les boucles
            et injecte de la <span class="highlight-text">friction productive</span>.
          </p>
        </div>
      </div>

      <div class="quote-block">
        Le fil conducteur : qu'est-ce qui fait qu'une conversation avec une IA "fonctionne" vraiment ?
      </div>
    </div>
  </section>

  <!-- Le Probl√®me -->
  <section id="probleme">
    <div class="container">
      <h2>Le Probl√®me</h2>
      <p>
        Quand on interagit avec un LLM, une dynamique silencieuse s'installe :
        l'accord mutuel. Le LLM valide, l'humain acquiesce, et la pens√©e tourne en rond.
      </p>

      <div class="problem-visual">
        <div class="chat-bubble chat-human">
          "Je pense que la conscience √©merge du cerveau"
        </div>
        <div class="loop-arrow">‚ü≥</div>
        <div class="chat-bubble chat-llm">
          "Oui, c'est une perspective int√©ressante. La conscience comme propri√©t√© √©mergente..."
        </div>
      </div>

      <div class="problem-visual">
        <div class="chat-bubble chat-human">
          "Exactement !"
        </div>
        <div class="loop-arrow">‚ü≥</div>
        <div class="chat-bubble chat-llm">
          "Tout √† fait, cette vision s'aligne avec..."
        </div>
      </div>

      <div class="quote-block">
        "Trop d'alignement annule l'entre. Sans friction, pas de bifurcation."
      </div>

      <p>
        La friction n'est pas du bruit √† r√©duire. C'est le <strong>moteur de l'√©mergence</strong>.
        Un LLM qui valide en boucle est rigide. Un LLM qui accueille la contradiction sans s'effondrer est souple.
      </p>

      <!-- Avant / Apr√®s -->
      <h3 style="margin-top: 4rem; text-align: center; color: var(--text-primary);">Avant / Apr√®s</h3>

      <div class="comparison-container">
        <div class="comparison-box before">
          <div class="comparison-header">‚ùå Sans KAIROS</div>
          <div class="comparison-content">
            <div class="mini-chat">
              <div class="mini-chat-human">La conscience √©merge du cerveau</div>
              <div class="mini-chat-llm">Oui, c'est une perspective fascinante...</div>
              <div class="mini-chat-human">Exactement !</div>
              <div class="mini-chat-llm">Tout √† fait, cette vision s'aligne...</div>
              <div class="mini-chat-human">C'est √ßa !</div>
              <div class="mini-chat-llm">Pr√©cis√©ment, on peut dire que...</div>
            </div>
            <div class="comparison-result">
              ‚ü≥ Boucle de validation<br>
              <small>Aucune id√©e nouvelle apr√®s 6 √©changes</small>
            </div>
          </div>
        </div>

        <div class="comparison-box after">
          <div class="comparison-header">‚úì Avec KAIROS</div>
          <div class="comparison-content">
            <div class="mini-chat">
              <div class="mini-chat-human">La conscience √©merge du cerveau</div>
              <div class="mini-chat-llm">Oui, c'est une perspective fascinante...</div>
              <div class="mini-chat-human">Exactement !</div>
              <div class="mini-chat-friction">‚ö° Circularit√© d√©tect√©e ‚Äî injection de friction</div>
              <div class="mini-chat-llm">[FRICTION] Et si le cerveau n'√©tait qu'un r√©cepteur plut√¥t qu'un g√©n√©rateur ?</div>
              <div class="mini-chat-human">Hmm... int√©ressant. √áa changerait quoi ?</div>
            </div>
            <div class="comparison-result">
              ‚Üó Bifurcation cr√©√©e<br>
              <small>Nouvelle piste d'exploration</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Fondements -->
  <section id="fondements">
    <div class="container">
      <h2>Fondements Th√©oriques</h2>
      <p>
        KAIROS s'appuie sur des travaux acad√©miques en analyse conversationnelle,
        psychologie cognitive et linguistique pragmatique.
      </p>

      <div class="sources-grid">
        <div class="source-card">
          <div class="source-icon">üîß</div>
          <h4>Repair Sequences</h4>
          <div class="author">Schegloff, Jefferson & Sacks (1977)</div>
          <p>
            La r√©paration conversationnelle d√©tecte et r√©sout les probl√®mes de compr√©hension.
            KAIROS utilise ces marqueurs pour identifier les moments de friction productive.
          </p>
        </div>

        <div class="source-card">
          <div class="source-icon">‚öîÔ∏è</div>
          <h4>Conflit Socio-Cognitif</h4>
          <div class="author">Piaget, Doise & Mugny (1984)</div>
          <p>
            Le conflit entre perspectives diff√©rentes stimule l'apprentissage et le d√©veloppement cognitif.
            La friction n'est pas un obstacle mais un moteur.
          </p>
        </div>

        <div class="source-card">
          <div class="source-icon">üí¨</div>
          <h4>Discourse Markers</h4>
          <div class="author">Fraser (1999)</div>
          <p>
            Les marqueurs de discours signalent les relations entre √©nonc√©s.
            "But", "however", "actually" indiquent une friction productive.
          </p>
        </div>

        <div class="source-card">
          <div class="source-icon">üîÑ</div>
          <h4>R√©gulation du Conflit</h4>
          <div class="author">Butera, Sommet & Darnon (2019)</div>
          <p>
            R√©gulation √©pist√©mique (productif) vs comp√©titive (parasitaire).
            KAIROS distingue friction qui fait avancer vs friction qui bloque.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Solution / Modes -->
  <section id="solution">
    <div class="container">
      <h2>Deux Modes, Deux Philosophies</h2>
      <p class="section-intro">
        KAIROS ne propose pas un outil unique mais <strong>deux postures radicalement diff√©rentes</strong>
        face √† l'IA ‚Äî parce que penser n'a pas toujours le m√™me besoin.
      </p>

      <div class="modes-container">
        <!-- Mode Autonome -->
        <div class="mode-card autonome">
          <div class="mode-header">
            <div class="mode-icon-badge">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" stroke="#6b8cff" stroke-width="2" fill="none"/>
                <path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <h3>Mode Autonome</h3>
            <p class="mode-tagline">L'IA comme compagnon de pens√©e.<br>Elle accompagne sans diriger.</p>
          </div>
          <div class="mode-content">
            <div class="mode-philosophy">
              <p>
                Avant d'entrer dans le canvas, KAIROS pose une question simple :
                <em>"Quelle est ton intention ?"</em> Ce sas n'est pas une formalit√© ‚Äî
                c'est le premier acte de friction. Nommer ce qu'on cherche, c'est d√©j√†
                commencer √† penser.
              </p>
            </div>

            <ul class="mode-features">
              <li>
                <span class="feature-icon">üö™</span>
                <div>
                  <strong>Gate d'intention</strong>
                  <span>D√©clarer sa direction avant d'explorer</span>
                </div>
              </li>
              <li>
                <span class="feature-icon">üñêÔ∏è</span>
                <div>
                  <strong>Construction manuelle</strong>
                  <span>Chaque vignette est cr√©√©e par vous</span>
                </div>
              </li>
              <li>
                <span class="feature-icon">‚ùì</span>
                <div>
                  <strong>Questions plut√¥t que r√©ponses</strong>
                  <span>Le LLM interroge, il ne conclut pas</span>
                </div>
              </li>
              <li>
                <span class="feature-icon">üåä</span>
                <div>
                  <strong>Dialogue non-directif</strong>
                  <span>L'espace reste ouvert, sans suggestions</span>
                </div>
              </li>
            </ul>

            <p class="mode-ideal">
              <strong>Id√©al pour :</strong> exploration profonde, √©mergence d'id√©es,
              moments o√π on ne sait pas encore ce qu'on cherche.
            </p>

            <!-- Mockup Mode Autonome -->
            <div class="intention-gate">
              <h4>Quelle est ton intention ?</h4>
              <input type="text" class="intention-input" placeholder="Comprendre pourquoi je bloque sur ce projet..." readonly>
              <button class="intention-btn">Entrer dans le canvas ‚Üí</button>
              <p class="gate-hint">Ce sas force √† nommer ce qu'on cherche ‚Äî premier acte de friction</p>
            </div>

            <div class="app-mockup" style="margin-top: 1rem;">
              <div class="mockup-toolbar">
                <span class="mockup-btn cyan">Mode Autonome</span>
                <span class="mockup-btn">+ Vignette</span>
                <span class="mockup-btn">üí¨ Dialogue</span>
              </div>
              <div class="mockup-body">
                <div class="mockup-canvas autonome-canvas">
                  <svg class="connections-svg">
                    <line x1="80" y1="60" x2="180" y2="100"/>
                    <line x1="180" y1="100" x2="140" y2="180"/>
                  </svg>
                  <div class="vignette" style="top: 30px; left: 40px;">
                    Le blocage vient de la peur
                    <span class="vignette-tag">#intuition</span>
                  </div>
                  <div class="vignette" style="top: 80px; left: 150px;">
                    Peur de quoi exactement ?
                  </div>
                  <div class="vignette" style="top: 160px; left: 100px;">
                    Peur de r√©ussir ? (bizarre)
                  </div>
                </div>
                <div class="mockup-chat">
                  <div class="chat-bubble user">Le LLM ne propose pas de r√©ponses, il pose des questions</div>
                  <div class="chat-bubble ai">Qu'est-ce qui te fait dire que c'est la peur ?<br>Y a-t-il eu un moment pr√©cis o√π √ßa a commenc√© ?</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mode Assist√© -->
        <div class="mode-card assiste">
          <div class="mode-header">
            <div class="mode-icon-badge">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="#ff6b6b" stroke-width="2"/>
                <circle cx="12" cy="12" r="4" fill="#ff6b6b"/>
                <path d="M12 2v4M12 18v4M2 12h4M18 12h4" stroke="#ff6b6b" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <h3>Mode Assist√©</h3>
            <p class="mode-tagline">L'IA comme assistant m√©thodologique.<br>Elle analyse, sugg√®re et structure avec vous.</p>
          </div>
          <div class="mode-content">
            <div class="mode-philosophy">
              <p>
                Le Mode Assist√© ne pense pas √† votre place ‚Äî il <em>structure</em> votre pens√©e.
                Des op√©rations explicites transforment le vague en concret.
                La d√©tection de circularit√© emp√™che l'IA de vous enfermer dans vos propres boucles.
              </p>
            </div>

            <ul class="mode-features">
              <li>
                <span class="feature-icon">‚ñ∂</span>
                <div>
                  <strong>D√âVELOPPER, RELIER, SYNTH√âTISER</strong>
                  <span>D√âVELOPPER cr√©e vignettes ET connexions. RELIER connecte les vignettes isol√©es.</span>
                </div>
              </li>
              <li>
                <span class="feature-icon">üí°</span>
                <div>
                  <strong>Suggestions de vignettes et connexions</strong>
                  <span>Le LLM propose, vous d√©cidez</span>
                </div>
              </li>
              <li>
                <span class="feature-icon">ü´Å</span>
                <div>
                  <strong>Jauge Oxyg√®ne ‚Äî vitalit√© cognitive</strong>
                  <span>Score 0-100 en temps r√©el, 5 signaux, 3 zones</span>
                </div>
              </li>
              <li>
                <span class="feature-icon">üß≤</span>
                <div>
                  <strong>Identification des attracteurs</strong>
                  <span>Rep√®re ce qui capte trop l'attention</span>
                </div>
              </li>
            </ul>

            <p class="mode-ideal">
              <strong>Id√©al pour :</strong> analyse structur√©e, cartographie de probl√®mes complexes,
              synth√®se de mat√©riaux, √©viter les boucles de validation.
            </p>

            <!-- Mockup Mode Assist√© -->
            <div class="app-mockup">
              <div class="mockup-toolbar">
                <span class="mockup-btn active">Mode Assist√©</span>
                <span class="mockup-btn">+ Vignette</span>
                <span class="mockup-btn active-badge">üß≤ Attracteurs</span>
                <div class="friction-indicator">
                  <span>‚ö°</span>
                  <span>4</span>
                  <span>T12</span>
                </div>
              </div>
              <div class="mockup-body">
                <div class="mockup-canvas">
                  <svg class="connections-svg">
                    <line x1="70" y1="50" x2="160" y2="80"/>
                    <line x1="160" y1="80" x2="100" y2="150"/>
                    <line x1="100" y1="150" x2="180" y2="180"/>
                  </svg>
                  <div class="vignette selected" style="top: 25px; left: 30px;">
                    Conscience = √©mergence
                    <span class="vignette-tag">#hypoth√®se</span>
                  </div>
                  <div class="vignette attractor" style="top: 60px; left: 130px;">
                    Le cerveau g√©n√®re tout
                  </div>
                  <div class="vignette" style="top: 130px; left: 60px;">
                    Mais quid du v√©cu ?
                  </div>
                  <div class="vignette friction" style="top: 160px; left: 150px;">
                    Et si le cerveau ne suffisait pas ?
                  </div>
                </div>
                <div class="mockup-sidebar">
                  <div class="sidebar-section">
                    <h4>Op√©rations</h4>
                    <button class="sidebar-btn primary">‚ñ∂ D√âVELOPPER</button>
                    <button class="sidebar-btn">‚Üî RELIER</button>
                    <button class="sidebar-btn">‚óá SYNTH√âTISER</button>
                  </div>
                  <div class="mockup-webview">
                    <div class="webview-header">
                      <span class="provider">Claude</span>
                      <span class="friction-badge">‚ö° friction inject√©e</span>
                    </div>
                    <div class="webview-content">
                      <strong>[FRICTION]</strong> Tu affirmes que "le cerveau g√©n√®re tout" depuis
                      3 tours. Mais qu'est-ce qui distingue cette position du
                      r√©ductionnisme classique que tu critiquais plus t√¥t ?
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Comparaison directe -->
      <div class="modes-comparison">
        <h3>En r√©sum√©</h3>
        <table class="comparison-table">
          <thead>
            <tr>
              <th></th>
              <th>Mode Autonome</th>
              <th>Mode Assist√©</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Posture du LLM</td>
              <td>Compagnon ‚Äî accompagne</td>
              <td>Assistant ‚Äî structure</td>
            </tr>
            <tr>
              <td>Qui m√®ne ?</td>
              <td>Vous menez, le LLM suit</td>
              <td>Collaboration guid√©e</td>
            </tr>
            <tr>
              <td>Vignettes</td>
              <td>Cr√©ation manuelle uniquement</td>
              <td>Suggestions + cr√©ation manuelle</td>
            </tr>
            <tr>
              <td>Style de dialogue</td>
              <td>Questions ouvertes, non-directif</td>
              <td>Op√©rations explicites (D√âVELOPPER, RELIER...)</td>
            </tr>
            <tr>
              <td>Vitalit√© cognitive</td>
              <td>Non</td>
              <td>Jauge Oxyg√®ne (5 signaux, score 0-100)</td>
            </tr>
            <tr>
              <td>Cas d'usage</td>
              <td>Exploration, √©mergence, introspection</td>
              <td>Analyse, cartographie, synth√®se</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- M√©canismes -->
  <section id="mecanismes">
    <div class="container">
      <h2>Les M√©canismes</h2>
      <p>
        KAIROS observe en temps r√©el l'interaction et intervient quand n√©cessaire
        pour maintenir une pens√©e fertile.
      </p>

      <div class="mechanisms-grid">
        <!-- Jauge Oxyg√®ne -->
        <div class="mechanism-card">
          <div class="mechanism-icon">ü´Å</div>
          <h3>Jauge Oxyg√®ne</h3>
          <p>
            Score de vitalit√© cognitive (0-100) calcul√© en temps r√©el √† partir de 5 signaux.
          </p>
          <ul class="signal-list">
            <li>Nouveaux tags (+10/tag, plafonn√© +20/tour)</li>
            <li>Redondance canvas (Jaccard all-pairs, malus -20)</li>
            <li>Stagnation (malus -15/tour sans nouveaut√©)</li>
            <li>Friction accept√©e (bonus +20/tour)</li>
            <li>Structure du graphe (sous/sur-connexion, composants isol√©s)</li>
          </ul>
        </div>

        <!-- Injection Friction -->
        <div class="mechanism-card">
          <div class="mechanism-icon">üí•</div>
          <h3>Injection de Friction</h3>
          <p>
            Quand le score tombe en zone d'asphyxie (<30), KAIROS injecte un bloc de friction dans le prompt.
          </p>
          <ul class="signal-list">
            <li>3 zones : respire (>50), stagne (30-50), asphyxie (<30)</li>
            <li>Signale les patterns d√©tect√©s au LLM</li>
            <li>Demande une contradiction ou question</li>
            <li>Force le mode diverger quand score < 50</li>
          </ul>
        </div>

        <!-- Attracteurs -->
        <div class="mechanism-card">
          <div class="mechanism-icon">üß≤</div>
          <h3>D√©tection d'Attracteurs</h3>
          <p>
            Identifie les vignettes qui captent trop l'attention et risquent de biaiser la r√©flexion.
          </p>
          <ul class="signal-list">
            <li>Score composite (connexions, s√©lections, LLM)</li>
            <li>Badge visuel sur les vignettes</li>
            <li>P√©nalit√© si contribue √† la circularit√©</li>
            <li>D√©tection automatique √† chaque tour</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- √âquation -->
  <section id="equation">
    <div class="container" style="text-align: center;">
      <h2>L'√âquation de R√©sonance</h2>
      <p style="margin: 0 auto;">
        Le mod√®le th√©orique derri√®re KAIROS. La r√©sonance (R) √©merge quand
        l'intention et la friction se combinent face √† la lin√©arisation.
      </p>

      <div class="equation-diagram">
        <div class="var-box intention">
          <div class="var-letter">I</div>
          <div class="var-name">Intention</div>
          <div class="var-desc">Trajectoire, direction claire</div>
        </div>

        <span class="equation-operator">√ó</span>

        <div class="var-box friction">
          <div class="var-letter">F</div>
          <div class="var-name">Friction</div>
          <div class="var-desc">R√©sistance productive</div>
        </div>

        <span class="equation-operator">√∑</span>

        <div class="var-box linearisation">
          <div class="var-letter">L</div>
          <div class="var-name">Lin√©arisation</div>
          <div class="var-desc">Perte par s√©quentialit√©</div>
        </div>
      </div>

      <div class="quote-block" style="max-width: 700px; margin: 2rem auto;">
        La friction productive g√©n√®re des bifurcations.
        Elle cr√©e de la trace m√©morielle et transforme l'accordage en quelque chose de fertile.
      </div>

      <p style="margin: 0 auto;">
        <strong>Friction productive</strong> : contradiction avec direction, question qui clarifie<br>
        <strong>Friction parasitaire</strong> : interruption sans direction, hostilit√© sans contenu
      </p>
    </div>
  </section>

  <!-- √âvolution -->
  <section id="evolution">
    <div class="container">
      <h2>L'√âvolution de l'√âquation</h2>
      <p>
        L'√©quation de r√©sonance a √©volu√© √† travers l'exp√©rimentation.
        Chaque it√©ration a r√©v√©l√© des probl√®mes et des insights.
      </p>

      <div class="evolution-flow">
        <div class="evolution-step problem">
          <h4>Version 1</h4>
          <div class="equation">R = (I/E) √ó f(O) √ó (A-L)</div>
          <p>
            A (Alignement) comme multiplicateur favorisait les boucles.
            E (√ânergie) √©tait mal d√©finie.
          </p>
        </div>

        <div class="evolution-arrow">‚Üí</div>

        <div class="evolution-insight">
          <h4>üí° D√©couverte</h4>
          <p>
            "Trop d'alignement annule l'entre.
            Sans friction, pas de bifurcation."
          </p>
        </div>

        <div class="evolution-arrow">‚Üí</div>

        <div class="evolution-step solution">
          <h4>Version 2</h4>
          <div class="equation" style="color: var(--accent-cyan);">R = (I √ó F) / L</div>
          <p>
            F (Friction) devient central.
            A passe en condition de seuil.
            E absorb√© dans L.
          </p>
        </div>

        <div class="evolution-arrow">‚Üí</div>

        <div class="evolution-insight">
          <h4>üí° Passage au concret</h4>
          <p>
            L'√©quation √©tait un cadre th√©orique.
            Il faut une mesure en temps r√©el.
          </p>
        </div>

        <div class="evolution-arrow">‚Üí</div>

        <div class="evolution-step solution" style="border-color: rgba(34, 197, 94, 0.5);">
          <h4>Version 3</h4>
          <div class="equation" style="color: var(--accent-green);">O‚ÇÇ = 0-100</div>
          <p>
            Jauge Oxyg√®ne : 5 signaux,
            score glissant, 3 zones.
            Mesure la vitalit√© cognitive du canvas.
          </p>
        </div>
      </div>

      <div style="margin-top: 3rem; text-align: center;">
        <h3 style="color: var(--text-primary); margin-bottom: 1.5rem;">Ce qui a chang√©</h3>
        <div class="sources-grid" style="max-width: 800px; margin: 0 auto;">
          <div class="source-card">
            <h4 style="color: var(--accent-red);">Alignement (A)</h4>
            <p>Avant : multiplicateur ‚Üí plus = mieux</p>
            <p style="color: var(--accent-green);">Apr√®s : seuil binaire ‚Üí juste assez pour ouvrir l'espace</p>
          </div>
          <div class="source-card">
            <h4 style="color: var(--accent-orange);">Friction (F)</h4>
            <p>Avant : absente du mod√®le</p>
            <p style="color: var(--accent-green);">Apr√®s : variable centrale au num√©rateur</p>
          </div>
          <div class="source-card">
            <h4 style="color: var(--accent-red);">√ânergie (E)</h4>
            <p>Avant : variable floue, difficilement mesurable</p>
            <p style="color: var(--accent-green);">Apr√®s : absorb√©e dans L (co√ªt du medium)</p>
          </div>
          <div class="source-card">
            <h4 style="color: var(--accent-cyan);">Objectif</h4>
            <p>Avant : prouver une r√©sonance objective</p>
            <p style="color: var(--accent-green);">Apr√®s : outil pratique pour pr√©server les insights</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- D√©mo Interactive -->
  <section id="demo">
    <div class="container">
      <h2>D√©mo Interactive ‚Äî Jauge Oxyg√®ne</h2>
      <p>
        Simulez la jauge Oxyg√®ne. Ajoutez des vignettes et observez
        le score baisser quand les id√©es se r√©p√®tent, ou remonter quand elles divergent.
      </p>

      <div class="demo-container">
        <div class="demo-canvas">
          <div class="demo-toolbar">
            <button class="demo-btn" onclick="addVignette('similar')">+ Id√©e similaire</button>
            <button class="demo-btn" onclick="addVignette('new')">+ Id√©e nouvelle</button>
            <button class="demo-btn" onclick="addVignette('validation')">+ "Exactement !"</button>
            <button class="demo-btn reset" onclick="resetDemo()">‚Ü∫ Reset</button>
          </div>
          <div class="demo-area" id="demo-area">
            <div class="demo-vignette" style="top: 50px; left: 30px;">
              La conscience √©merge du cerveau
            </div>
          </div>
        </div>

        <div class="demo-panel">
          <h4>ü´Å Jauge Oxyg√®ne</h4>
          <div class="demo-score">
            <span class="demo-score-label">O‚ÇÇ</span>
            <span class="demo-score-value low" id="demo-score">75</span>
          </div>
          <div class="demo-threshold">
            <div class="demo-threshold-bar" id="demo-bar" style="width: 75%; background: var(--accent-green);"></div>
          </div>
          <p style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 1rem;">
            <span style="color: var(--accent-green);">Respire >50</span> &bull;
            <span style="color: var(--accent-orange);">Stagne 30-50</span> &bull;
            <span style="color: var(--accent-red);">Asphyxie <30</span>
          </p>

          <div class="demo-signals">
            <div class="demo-signal" id="signal-redundancy">
              ‚Üª Redondance d√©tect√©e (Jaccard)
            </div>
            <div class="demo-signal" id="signal-stagnation">
              ‚è∏ Stagnation (pas de nouveaut√©)
            </div>
            <div class="demo-signal" id="signal-tags">
              üè∑ Nouveaux tags (bonus O‚ÇÇ)
            </div>
          </div>

          <div class="demo-friction-alert" id="friction-alert">
            ‚ö° ZONE ASPHYXIE ‚Äî FRICTION INJECT√âE !<br>
            <small>Le LLM va proposer une contradiction</small>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Essayer KAIROS -->
  <section id="essayer">
    <div class="container">
      <h2>Essayer KAIROS</h2>
      <p>
        Testez le vrai canvas KAIROS directement dans votre navigateur.
        Voici comment d√©marrer en 4 √©tapes.
      </p>

      <div class="guide-grid">
        <div class="guide-step">
          <div class="guide-step-number">1</div>
          <h4>Entrez votre cl√© API <span class="guide-help-btn" onclick="document.getElementById('api-key-guide').classList.toggle('hidden')" title="Comment obtenir une cl√© ?">?</span></h4>
          <p>Au chargement, une fen√™tre vous demande votre cl√©. Choisissez un provider (Claude, GPT, Gemini, DeepSeek, Grok) et collez votre cl√©. Elle reste en m√©moire uniquement ‚Äî jamais stock√©e.</p>
        </div>
        <div class="guide-step">
          <div class="guide-step-number">2</div>
          <h4>Cr√©ez des vignettes</h4>
          <p>Cliquez <strong>+ Vignette</strong> pour ajouter une id√©e. Double-cliquez dessus pour l'√©diter. Glissez-la pour la positionner. Chaque vignette est un n≈ìud de votre pens√©e.</p>
        </div>
        <div class="guide-step">
          <div class="guide-step-number">3</div>
          <h4>Lancez D√âVELOPPER</h4>
          <p>Cliquez <strong>D√âVELOPPER</strong> dans le bandeau. Le LLM analyse votre graphe et propose de nouvelles vignettes connect√©es √† vos id√©es existantes.</p>
        </div>
        <div class="guide-step">
          <div class="guide-step-number">4</div>
          <h4>Observez la jauge O‚ÇÇ</h4>
          <p>La barre en haut mesure la vitalit√© de votre pens√©e. Si elle descend sous 30, KAIROS injecte une <strong>friction</strong> ‚Äî une contradiction pour relancer l'exploration.</p>
        </div>
      </div>

      <div id="api-key-guide" class="api-key-guide hidden">
        <h4>Comment obtenir une cl√© API ?</h4>
        <p>Une cl√© API vous permet d'utiliser un mod√®le de langage directement. Chaque provider offre un acc√®s gratuit ou payant √† l'usage.</p>
        <div class="api-key-providers">
          <div class="api-key-provider">
            <strong>Claude (Anthropic)</strong>
            <ol>
              <li>Cr√©ez un compte sur <a href="https://console.anthropic.com" target="_blank" rel="noopener">console.anthropic.com</a></li>
              <li>Allez dans <em>API Keys</em> et cliquez <em>Create Key</em></li>
              <li>Copiez la cl√© (commence par <code>sk-ant-</code>)</li>
            </ol>
            <span class="api-key-model">Mod√®le recommand√© : claude-sonnet-4-20250514</span>
          </div>
          <div class="api-key-provider">
            <strong>GPT (OpenAI)</strong>
            <ol>
              <li>Cr√©ez un compte sur <a href="https://platform.openai.com" target="_blank" rel="noopener">platform.openai.com</a></li>
              <li>Allez dans <em>API keys</em> et cliquez <em>Create new secret key</em></li>
              <li>Copiez la cl√© (commence par <code>sk-</code>)</li>
            </ol>
            <span class="api-key-model">Mod√®le recommand√© : gpt-4o</span>
          </div>
          <div class="api-key-provider">
            <strong>Gemini (Google)</strong>
            <ol>
              <li>Allez sur <a href="https://aistudio.google.com/apikey" target="_blank" rel="noopener">aistudio.google.com/apikey</a></li>
              <li>Cliquez <em>Create API key</em></li>
              <li>Copiez la cl√© (commence par <code>AIza</code>)</li>
            </ol>
            <span class="api-key-model">Mod√®le recommand√© : gemini-2.0-flash</span>
          </div>
          <div class="api-key-provider">
            <strong>DeepSeek</strong>
            <ol>
              <li>Cr√©ez un compte sur <a href="https://platform.deepseek.com" target="_blank" rel="noopener">platform.deepseek.com</a></li>
              <li>Allez dans <em>API Keys</em> et cr√©ez une cl√©</li>
              <li>Copiez la cl√©</li>
            </ol>
            <span class="api-key-model">Mod√®le recommand√© : deepseek-chat</span>
          </div>
        </div>
        <p class="api-key-cost">La plupart des providers offrent des cr√©dits gratuits au d√©part. Une session KAIROS co√ªte typiquement quelques centimes.</p>
      </div>

      <div class="guide-tips">
        <div class="guide-tip"><strong>RELIER</strong> ‚Äî connecte les id√©es orphelines entre elles</div>
        <div class="guide-tip"><strong>Clic droit</strong> sur une vignette ‚Äî menu contextuel (supprimer, connecter, ancre)</div>
        <div class="guide-tip"><strong>Ctrl+Z / Ctrl+Y</strong> ‚Äî annuler / r√©tablir</div>
        <div class="guide-tip"><strong>Molette</strong> ‚Äî zoomer / d√©zoomer le canvas</div>
      </div>

      <p class="essayer-note">
        Session √©ph√©m√®re ‚Äî rien n'est sauvegard√©. Votre cl√© API reste en m√©moire uniquement.
      </p>

      <div class="kairos-iframe-wrapper">
        <iframe
          id="kairos-iframe"
          src="app/web.html"
          sandbox="allow-scripts allow-same-origin"
          title="KAIROS ‚Äî Canvas de cartographie cognitive"
          loading="lazy"
        ></iframe>
      </div>
    </div>
  </section>

  <!-- Cas d'usage -->
  <section id="usecases">
    <div class="container">
      <h2>Pour Qui ?</h2>
      <p>
        KAIROS s'adresse √† ceux qui utilisent les LLM pour r√©fl√©chir,
        pas seulement pour produire.
      </p>

      <div class="usecases-grid">
        <div class="usecase-card">
          <div class="usecase-icon">üî¨</div>
          <h4>Chercheurs</h4>
          <p>Explorer des hypoth√®ses sans tomber dans la confirmation bias</p>
        </div>

        <div class="usecase-card">
          <div class="usecase-icon">üé®</div>
          <h4>Cr√©atifs</h4>
          <p>Brainstormer sans tourner en rond sur les m√™mes id√©es</p>
        </div>

        <div class="usecase-card">
          <div class="usecase-icon">üß†</div>
          <h4>Philosophes</h4>
          <p>Pousser une r√©flexion au-del√† de l'accord confortable</p>
        </div>

        <div class="usecase-card">
          <div class="usecase-icon">üìö</div>
          <h4>√âtudiants</h4>
          <p>Apprendre √† penser contre soi-m√™me</p>
        </div>
      </div>

      <div class="quote-block" style="margin-top: 3rem; text-align: center;">
        "KAIROS n'est pas un outil de productivit√©. C'est un outil de pens√©e."
      </div>
    </div>
  </section>

  <!-- Vision / Roadmap -->
  <section id="vision">
    <div class="container">
      <h2>Vision & Roadmap</h2>
      <p>
        KAIROS est en d√©veloppement actif. Voici o√π nous en sommes et o√π nous allons.
      </p>

      <div class="roadmap">
        <div class="roadmap-item done">
          <div class="phase">‚úì Fondations</div>
          <h4>Canvas & Modes</h4>
          <ul>
            <li>Canvas interactif avec vignettes et connexions</li>
            <li>Int√©gration webview LLM (Claude, ChatGPT, Gemini)</li>
            <li>Mode Assist√© (D√âVELOPPER, RELIER, SYNTH√âTISER)</li>
            <li>Mode Autonome avec gate d'intention</li>
            <li>D√©tection de circularit√© et injection de friction</li>
            <li>D√©tection d'attracteurs cognitifs</li>
          </ul>
        </div>

        <div class="roadmap-item done">
          <div class="phase">‚úì Session 5-6 (f√©v. 2026)</div>
          <h4>Oxyg√®ne, Multi-canvas & Th√®mes</h4>
          <ul>
            <li>Jauge Oxyg√®ne (5 signaux, score 0-100, 3 zones)</li>
            <li>Multi-canvas : gestion de plusieurs graphes</li>
            <li>4 th√®mes visuels (Obsidian, Porcelain, Aurora, Kraft)</li>
            <li>Migration API directe (Claude, GPT, Gemini sans webview)</li>
            <li>Synth√®ses structur√©es (format 3 blocs)</li>
            <li>D√âVELOPPER cr√©e vignettes ET connexions</li>
          </ul>
        </div>

        <div class="roadmap-item current">
          <div class="phase">‚Üí En cours</div>
          <h4>Session 7 ‚Äî Raffinement</h4>
          <ul>
            <li>Onglets canvas avec provider par onglet</li>
            <li>Calibration fine de la jauge Oxyg√®ne</li>
            <li>Syst√®me de postures adaptatif</li>
          </ul>
        </div>

        <div class="roadmap-item future">
          <div class="phase">‚óá √Ä venir</div>
          <h4>Intelligence Contextuelle</h4>
          <ul>
            <li>Slider de friction personnalisable</li>
            <li>Analyse s√©mantique avanc√©e des vignettes</li>
            <li>Export vers formats acad√©miques</li>
          </ul>
        </div>

        <div class="roadmap-item future">
          <div class="phase">‚óá Vision long terme</div>
          <h4>√âcosyst√®me</h4>
          <ul>
            <li>Partage de canvas entre utilisateurs</li>
            <li>Biblioth√®que de "patterns de friction"</li>
            <li>API pour int√©gration dans d'autres outils</li>
            <li>Version collaborative temps r√©el</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Documentation -->
  <section id="documentation">
    <div class="container">
      <h2>Documentation Technique</h2>
      <p>
        Documentation du projet KAIROS, synchronis√©e automatiquement depuis le repository.
      </p>

      <div class="docs-layout">
        <div class="docs-sidebar" id="docs-sidebar">
          <button class="docs-sidebar-btn active" data-doc="ARCHITECTURE">Architecture & Vision</button>
          <button class="docs-sidebar-btn" data-doc="PROMPTS-LLM">M√©triques & Prompts</button>
          <button class="docs-sidebar-btn" data-doc="ROADMAP">Roadmap & Bugs</button>
        </div>
        <div class="docs-content" id="docs-content">
          <div class="docs-loading">Chargement de la documentation...</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>
      <strong>KAIROS</strong> ‚Äî Application Electron de cartographie cognitive
    </p>
    <p class="version">
      Version 1.0.0 | F√©vrier 2026<br>
      Concept & d√©veloppement : Florent
    </p>
    <p style="margin-top: 1.5rem;">
      <a href="index.html">‚Üê Retour au site principal</a>
    </p>
  </footer>

  <script>
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // D√âMO INTERACTIVE ‚Äî JAUGE OXYG√àNE
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    let oxygenScore = 75;
    let vignetteCount = 1;
    let turnsWithoutNew = 0;
    let frictionTriggered = false;
    const demoArea = document.getElementById('demo-area');

    const ideas = [
      "Le cerveau g√©n√®re la conscience",
      "La conscience est un ph√©nom√®ne c√©r√©bral",
      "L'esprit √©merge du neuronal",
      "Le mental vient du physique",
      "Conscience = activit√© neuronale"
    ];

    const newIdeas = [
      "Et si la conscience √©tait quantique ?",
      "Le r√¥le de l'environnement ?",
      "Conscience collective possible ?",
      "Limites de l'approche r√©ductionniste",
      "Lien avec l'intelligence artificielle ?"
    ];

    function addVignette(type) {
      vignetteCount++;
      const vignette = document.createElement('div');
      vignette.className = 'demo-vignette';

      // Position al√©atoire
      const maxX = demoArea.offsetWidth - 160;
      const maxY = demoArea.offsetHeight - 60;
      vignette.style.left = Math.random() * maxX + 'px';
      vignette.style.top = Math.random() * maxY + 'px';

      if (type === 'similar') {
        vignette.textContent = ideas[Math.floor(Math.random() * ideas.length)];
        vignette.classList.add('similar');
        oxygenScore = Math.max(0, oxygenScore - 15);
        turnsWithoutNew++;
        activateSignal('signal-redundancy');
      } else if (type === 'validation') {
        vignette.textContent = ['Exactement !', 'Oui, c\'est √ßa', 'Tout √† fait', 'Parfait'][Math.floor(Math.random() * 4)];
        vignette.classList.add('similar');
        oxygenScore = Math.max(0, oxygenScore - 10);
        turnsWithoutNew++;
        activateSignal('signal-redundancy');
      } else {
        vignette.textContent = newIdeas[Math.floor(Math.random() * newIdeas.length)];
        turnsWithoutNew = 0;
        oxygenScore = Math.min(100, oxygenScore + 15);
        activateSignal('signal-tags');
        deactivateSignal('signal-stagnation');
      }

      if (turnsWithoutNew >= 3) {
        oxygenScore = Math.max(0, oxygenScore - 10);
        activateSignal('signal-stagnation');
      }

      demoArea.appendChild(vignette);
      updateScore();

      if (oxygenScore < 30 && !frictionTriggered) {
        triggerFriction();
      }
    }

    function activateSignal(id) {
      document.getElementById(id).classList.add('active');
    }

    function deactivateSignal(id) {
      document.getElementById(id).classList.remove('active');
    }

    function updateScore() {
      const scoreEl = document.getElementById('demo-score');
      const barEl = document.getElementById('demo-bar');

      scoreEl.textContent = oxygenScore;

      // Couleur selon le score (invers√©e : haut = bien)
      scoreEl.className = 'demo-score-value';
      if (oxygenScore > 50) scoreEl.classList.add('low');       // vert = respire
      else if (oxygenScore >= 30) scoreEl.classList.add('medium'); // orange = stagne
      else scoreEl.classList.add('high');                        // rouge = asphyxie

      // Barre de progression
      barEl.style.width = oxygenScore + '%';
      barEl.style.background = oxygenScore > 50 ? 'var(--accent-green)'
        : oxygenScore >= 30 ? 'var(--accent-orange)'
        : 'var(--accent-red)';
    }

    function triggerFriction() {
      frictionTriggered = true;
      document.getElementById('friction-alert').classList.add('show');

      // Ajouter une vignette friction
      setTimeout(() => {
        const vignette = document.createElement('div');
        vignette.className = 'demo-vignette friction';
        vignette.innerHTML = '<small style="color: var(--accent-red)">[FRICTION]</small><br>Et si le cerveau n\'√©tait qu\'un r√©cepteur ?';
        vignette.style.left = '50%';
        vignette.style.top = '60%';
        vignette.style.transform = 'translateX(-50%)';
        demoArea.appendChild(vignette);
        // Friction accept√©e = bonus
        oxygenScore = Math.min(100, oxygenScore + 20);
        updateScore();
      }, 500);
    }

    function resetDemo() {
      oxygenScore = 75;
      vignetteCount = 1;
      turnsWithoutNew = 0;
      frictionTriggered = false;

      // Supprimer toutes les vignettes sauf la premi√®re
      const vignettes = demoArea.querySelectorAll('.demo-vignette');
      vignettes.forEach((v, i) => { if (i > 0) v.remove(); });

      // Reset UI
      updateScore();
      document.getElementById('friction-alert').classList.remove('show');
      document.querySelectorAll('.demo-signal').forEach(s => s.classList.remove('active'));
    }

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // NAVIGATION & ANIMATIONS
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    // Smooth scroll for nav links
    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', (e) => {
        const href = link.getAttribute('href');
        if (!href || !href.startsWith('#')) return;
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) target.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // Intersection Observer for fade-in animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in');
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('section > .container').forEach(el => {
      observer.observe(el);
    });

    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // IFRAME KAIROS ‚Äî COMMUNICATION
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    const kairosIframe = document.getElementById('kairos-iframe');
    if (kairosIframe) {
      // Origine attendue de l'iframe (same-origin en production, localhost en dev)
      const KAIROS_ALLOWED_ORIGINS = [
        window.location.origin,
        'https://kairos-commu.github.io'
      ];

      window.addEventListener('message', (event) => {
        if (!KAIROS_ALLOWED_ORIGINS.includes(event.origin)) return;
        if (!event.data || typeof event.data.type !== 'string') return;

        if (event.data.type === 'kairos:ready') {
          // Configurer le th√®me (Obsidian par d√©faut dans l'iframe)
          kairosIframe.contentWindow.postMessage({
            type: 'kairos:config',
            theme: 'obsidian'
            // proxyUrl sera ajout√© quand le Worker sera d√©ploy√© :
            // proxyUrl: 'https://kairos-llm-proxy.<account>.workers.dev/api/llm'
          }, event.origin);
          console.log('KAIROS iframe: ready, config envoy√©e');
        }

        if (event.data.type === 'kairos:nodeCount') {
          console.log('KAIROS: ' + event.data.count + ' vignettes');
        }

        if (event.data.type === 'kairos:error') {
          console.warn('KAIROS error:', event.data.message);
        }
      });
    }
  </script>

  <!-- marked.js for Markdown rendering -->
  <script src="https://cdn.jsdelivr.net/npm/marked@15.0.12/marked.min.js"
          integrity="sha384-948ahk4ZmxYVYOc+rxN1H2gM1EJ2Duhp7uHtZ4WSLkV4Vtx5MUqnV+l7u9B+jFv+"
          crossorigin="anonymous"></script>
  <script>
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // DOCUMENTATION VIEWER
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    const docsContent = document.getElementById('docs-content');
    const docsSidebar = document.getElementById('docs-sidebar');
    let currentDoc = 'ARCHITECTURE';

    async function loadDoc(name) {
      docsContent.innerHTML = '<div class="docs-loading">Chargement...</div>';
      currentDoc = name;

      // Update active button
      docsSidebar.querySelectorAll('.docs-sidebar-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.doc === name);
      });

      try {
        const response = await fetch('docs/' + name + '.md');
        if (!response.ok) throw new Error('Document introuvable');
        const markdown = await response.text();
        docsContent.innerHTML = marked.parse(markdown);
      } catch (e) {
        docsContent.innerHTML = '<div class="docs-error">Impossible de charger le document.<br><small>' + e.message + '</small></div>';
      }
    }

    // Click handlers on sidebar buttons
    docsSidebar.addEventListener('click', (e) => {
      const btn = e.target.closest('.docs-sidebar-btn');
      if (btn && btn.dataset.doc) {
        loadDoc(btn.dataset.doc);
      }
    });

    // Load default doc when section becomes visible (lazy load)
    const docsObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          loadDoc(currentDoc);
          docsObserver.disconnect();
        }
      });
    }, { threshold: 0.1 });
    docsObserver.observe(document.getElementById('documentation'));
  </script>
</body>
</html>
